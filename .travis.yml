language: cpp
sudo: required
dist: trusty
os:
- linux
- osx
env:
  global:
  - OPENPSTD_MAJOR_VERSION=2
  - OPENPSTD_MINOR_VERSION=0
before_install:
- sudo chmod -R +x build
- export PATH=./build/:$PATH
- export PATH=/opt/qt55/bin/:$PATH
- install_add_repo.sh
install:
- install_boost.sh
- install_xsltproc.sh
- install_unqlite.sh
- install_Qt55.sh
- install_rapidjson.sh
- install_eigen.sh
before_script:
- uname -r
- gcc -v
- cmake --version
- cmake --help
- cpack --version
- cpack --help
script:
- compile.sh
- test.sh
deploy:
  provider: releases
  skip_cleanup: true
  api_key:
    secure: pjfMnM/5UoTHR4iVRsvaCnarRrIvkuhl6snOw1nQbxiuiJG0T4dGdMQ/p3IwbLprXL1pqDAxKU01Rz/aqU55IBl1oaebcxIUlYxUZ4ZasaQiyd4k30iGg+fzwl33blNG5dwozqyppzM+uJKHBa8a48CRmKgOFelQ659Ev0pnDHFqMghadAtBKb315Shp2QTjAm2ZgTsKvunZ6Rge/FzutoHOl5VeTT8+8qL2MZQic1gQGlNd2B+3X53zOMz4IU+nt6Y3DzZDXU/9Nb0KumkwHLyZHOfNBVTHQ9rxaUmEeNWtG9Qdqg/Fe8EC/3PIKdM2PjNFzv/FUnL1Dx8X5nt2mNbEiYN7yoTzMbxV2dT2wFvZuMeZa9rh9nJoFiflvMu4LepQmrJ56xJG585N0kW1Hm8a3NXNnkN360nBFRql1Oyl1aZFxVERCr+z9BReYkVlhmjI5mqpytGUvXiwZyyFec26X2p8jT1ugtv8PmPXRBwElT7C5PAKsf2CcH9RmMCFrVSyXwynOlxP60YMs7nca5DejmPlZu1ybrceM9N+MmveuxkPcxXqRPwXbjYwRWWMA1Mn6dw4tdUiYalL32Y6lGen7sDHHyZPR5q50Fby5zmQeHWKxtCQ1pHqsJxqclWj46GWoV1wdroFcH7zY8PDRv3m3B4QPYo4F5QyvPcFVIg=
  file: OpenPSTD-*-*.*\
  file_glob: true
  on:
    repo: micfort/openPSTD
    tags: true
